# ============================================================================
# Memory Infrastructure Phase 2 - Scalability Enhancements
# ============================================================================

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_URL=postgresql://memoryuser:memorypass@localhost:5432/memorydb

# Supabase Connection Example (Transaction Pooler - Port 6543)
# DATABASE_URL=postgres://[user]:[password]@[host]:6543/[db]?sslmode=require

# Supabase Connection Example (Session - Port 5432)
# DATABASE_URL=postgres://[user]:[password]@[host]:5432/[db]?sslmode=require

# ============================================================================
# REDIS (Phase 2 Scalability - Distributed Rate Limiting)
# ============================================================================
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# EXTRACTION PROVIDER (openai | anthropic | gemini | local)
# ============================================================================
EXTRACTION_PROVIDER=openai

# ============================================================================
# CHAT PROVIDER (optional, defaults to EXTRACTION_PROVIDER)
# Allows using different providers for extraction vs chat generation
# ============================================================================
# CHAT_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4

# Anthropic Configuration (optional)
# ANTHROPIC_API_KEY=your-anthropic-api-key-here
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# Gemini Configuration (optional)
# GEMINI_API_KEY=your-gemini-api-key-here
# GEMINI_MODEL=gemini-1.5-flash
# GEMINI_MAX_INPUT_TOKENS=8000
# GEMINI_MAX_OUTPUT_TOKENS=1024

# Local LLM Configuration (optional)
# LOCAL_LLM_ENDPOINT=http://localhost:11434/api/generate
# LOCAL_LLM_MODEL=llama2

# Provider Fallback (optional)
# Enable automatic fallback to OpenAI if Gemini hits rate limits
# PROVIDER_FALLBACK_ENABLED=false

# ============================================================================
# AUTHENTICATION
# ============================================================================
API_KEY=your-secure-api-key-min-16-chars

# ============================================================================
# SECURITY
# ============================================================================
# Comma-separated list of allowed CORS origins (NO wildcards)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# Maximum request size in bytes (default: 1MB)
MAX_REQUEST_SIZE=1048576

# Rate limit per minute (default: 100)
RATE_LIMIT_REQUESTS=100

# ============================================================================
# ENCRYPTION (Phase 2)
# ============================================================================
# Enable field-level encryption for sensitive data
FIELD_ENCRYPTION_ENABLED=false

# Encryption key (required if FIELD_ENCRYPTION_ENABLED=true)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ENCRYPTION_KEY=your-base64-encryption-key-here

# ============================================================================
# OBSERVABILITY (Phase 2)
# ============================================================================
# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# Enable structured JSON logging
STRUCTURED_LOGGING=true

# ============================================================================
# TTL CLEANUP (Phase 2)
# ============================================================================
# TTL cleanup interval in seconds (default: 3600 = 1 hour)
TTL_CLEANUP_INTERVAL=3600

# ============================================================================
# LOCK CONTENTION (Phase 2 Scalability)
# ============================================================================
# Maximum lock retry attempts (default: 3)
LOCK_MAX_RETRIES=3

# Lock retry delay in milliseconds (default: 100ms)
LOCK_RETRY_DELAY_MS=100

# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME=Memory Infrastructure Phase 2
DEBUG=false
ENVIRONMENT=production
